$(function(){
	$("#navUl").on("click","li",function(){
		$(this).addClass("active").siblings().removeClass("active");
		$("#divmap .divChange").eq($(this).index()).show().siblings().hide()
	})
	
	var mainList = new MainList();
	mainList.Init();
	
	$("#tableFather").on("click",".upLoadFile",function(){
		var id=$(this).data("id");
	})
//	$("#tableFather").on("click",".checkFile",function(){
//		var id=$(this).data("id");
//	})
	$("#tableFather").on("click",".delFile",function(){
		var id=$(this).data("id");
		layer.msg("是否删除",function(){
			$.ajax({
				url:webPath+"nyd/prj/deleteFile?id="+id,
				type:"post",
				success:function(data){
					layer.alert("删除成功")
				}
			})
		})
	})
	
})



var MainList = function() {
	var mainList = new Object();
	var url =webPath+ "nyd/prj/getPrjInfoAttach?prjId=00000";
	var columns = [{
		checkbox: true
	},
	{
		field: "id",
		visible: false,
		title: "id",
	},
	{
		field: "",
		title: "序号",
		formatter: function(value, row, index) {
			return index+1
		}
	},
	{
		field: "name",
		title: "附件名称"
	},
	{
		field: "",
		title: "上传状态",
		formatter: function(value, row, index) {
			if (row.attachUrl=="") {
				return "<p>待上传</p>"
			} else {
				return "<p>已上传</p>"
			}
		}
	},
	{
		field: "createDate",
		title: "上传时间"
	},
	{
		field: "",
		title: "操作",
		formatter: function(value, row, index) {
			if (row.attachUrl) {
				return "<a href='javascript:;'  data-id='"+row.id+"' class='upLoadFile'>上传附件</a>"
			} else {
				return "<a  download='" + row.name + "' href='" + domainPath + row.attachUrl + "' >查看</a>&nbsp;&nbsp;&nbsp;<a href='javascript:;' data-id='"+row.id+"' class='reds delFile'>删除</a>"
			}
		}
	}
	
	];
	mainList.Init = function() {
		$("#tableBs").bootstrapTable(getBsTableOptions(url, "toolbar", columns, mainList.queryParams, null,null,300))
	};
	mainList.queryParams = function(params) {
		var temp = {
			pageSize: params.pageSize,
			pageNumber: params.pageNumber,
		};
// temp.sortField ="sortnum";
// temp.sortDir = "asc"
		return temp
	};
	return mainList
};